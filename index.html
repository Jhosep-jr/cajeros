<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulación Cajeros - Crisis Convertibilidad</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
            border-bottom: 5px solid #e74c3c;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .university-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .tabs {
            display: flex;
            background: #ecf0f1;
            border-bottom: 2px solid #3498db;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            background: #ecf0f1;
            border: none;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            color: #2c3e50;
        }

        .tab:hover {
            background: #3498db;
            color: white;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .activity-section {
            margin-bottom: 40px;
            padding: 25px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #3498db;
        }

        .activity-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 10px;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #34495e;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        tr:hover {
            background: #e3f2fd;
        }

        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .chart-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            text-align: center;
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 1.2em;
            font-weight: 600;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .metric-card {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .scenario-controls {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid #3498db;
        }

        .control-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .control-item {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        select, input, button {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        select:focus, input:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        button {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            letter-spacing: 1px;
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .critical {
            color: #e74c3c;
            font-weight: bold;
        }

        .warning {
            color: #f39c12;
            font-weight: bold;
        }

        .normal {
            color: #27ae60;
            font-weight: bold;
        }

        .progress-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        footer {
            text-align: center;
            padding: 20px;
            background: #2c3e50;
            color: white;
            border-top: 5px solid #e74c3c;
        }

        @media (max-width: 768px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            .control-group {
                flex-direction: column;
            }
            
            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🏦 Simulación de Cajeros Automáticos</h1>
            <div class="subtitle">Crisis de Convertibilidad Monetaria - Análisis Completo</div>
            <div class="university-info">
                <strong>Universidad Adventista de Bolivia</strong> | 
                SIMULACIÓN Y DINÁMICA DE SISTEMAS  | 
                Lic. Maritza Torrico
            </div>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="openTab('actividad1')">Actividad 1</button>
            <button class="tab" onclick="openTab('actividad2')">Actividad 2</button>
            <button class="tab" onclick="openTab('actividad3')">Actividad 3</button>
        </div>

        <!-- ACTIVIDAD 1 -->
        <div id="actividad1" class="tab-content active">
            <div class="activity-section">
                <h2>📐 Actividad 1: Diseño del Modelo Conceptual y Tipología de Simulación</h2>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Variable</th>
                                <th>Tipo</th>
                                <th>Descripción</th>
                                <th>Ejemplo</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Retiros</strong></td>
                                <td>Variable de Entrada</td>
                                <td>Cantidad y monto de retiros realizados</td>
                                <td>50 retiros de Bs 800-2000</td>
                            </tr>
                            <tr>
                                <td><strong>Capacidad</strong></td>
                                <td>Variable de Estado</td>
                                <td>Efectivo disponible en cajero</td>
                                <td>Bs 50,000 inicial</td>
                            </tr>
                            <tr>
                                <td><strong>Tiempo</strong></td>
                                <td>Variable de Control</td>
                                <td>Tiempos entre llegadas y servicio</td>
                                <td>Exponencial(1.5 min)</td>
                            </tr>
                            <tr>
                                <td><strong>Localización</strong></td>
                                <td>Variable de Entorno</td>
                                <td>Ubicación geográfica del cajero</td>
                                <td>Cochabamba - Zona Urbana</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Tipo de Simulación</th>
                                <th>Características</th>
                                <th>Aplicación en el Caso</th>
                                <th>Ventajas</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Simulación Discreta</strong></td>
                                <td>Eventos en tiempos discretos</td>
                                <td>Llegadas de clientes, transacciones</td>
                                <td>Modela comportamiento individual</td>
                            </tr>
                            <tr>
                                <td><strong>Simulación Estocástica</strong></td>
                                <td>Variables aleatorias</td>
                                <td>Tiempos de servicio, montos</td>
                                <td>Captura incertidumbre real</td>
                            </tr>
                            <tr>
                                <td><strong>Simulación Dinámica</strong></td>
                                <td>Evolución en el tiempo</td>
                                <td>Cambio de efectivo, colas</td>
                                <td>Muestra evolución del sistema</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-title">Diagrama Causal - Efecto Pánico</div>
                        <div class="chart-container">
                            <canvas id="causalChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">Distribución de Variables del Sistema</div>
                        <div class="chart-container">
                            <canvas id="variablesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 2 -->
        <div id="actividad2" class="tab-content">
            <div class="activity-section">
                <h2>⚙️ Actividad 2: Desarrollo del Modelo y Ejecución de Experimentos</h2>
                
                <div class="scenario-controls">
                    <h3>🎮 Control de Simulación</h3>
                    <div class="control-group">
                        <div class="control-item">
                            <label for="scenario">Escenario:</label>
                            <select id="scenario">
                                <option value="normal">Situación Normal</option>
                                <option value="rumor">Rumor Convertibilidad</option>
                                <option value="crisis">Crisis Confirmada</option>
                            </select>
                        </div>
                        <div class="control-item">
                            <label for="clientes">Número de Clientes:</label>
                            <input type="number" id="clientes" min="10" max="200" value="50">
                        </div>
                        <div class="control-item">
                            <label for="efectivo">Efectivo Inicial (Bs):</label>
                            <input type="number" id="efectivo" min="10000" max="100000" value="50000">
                        </div>
                    </div>
                    <button onclick="runSimulation()">Ejecutar Simulación</button>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Escenario</th>
                                <th>Tasa Llegadas (min)</th>
                                <th>% Retiros</th>
                                <th>Monto Promedio (Bs)</th>
                                <th>Descripción</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Normal</strong></td>
                                <td>1.5</td>
                                <td>50%</td>
                                <td>800</td>
                                <td>Comportamiento regular del sistema</td>
                            </tr>
                            <tr>
                                <td><strong>Rumor</strong></td>
                                <td>0.8</td>
                                <td>70%</td>
                                <td>1200</td>
                                <td>Aumento moderado por rumores</td>
                            </tr>
                            <tr>
                                <td><strong>Crisis</strong></td>
                                <td>0.4</td>
                                <td>90%</td>
                                <td>1800</td>
                                <td>Pánico total - retiros máximos</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-title">Comparación de Escenarios</div>
                        <div class="chart-container">
                            <canvas id="scenarioComparisonChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">Distribución de Transacciones</div>
                        <div class="chart-container">
                            <canvas id="transactionDistributionChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Métrica</th>
                                <th>Escenario Normal</th>
                                <th>Escenario Rumor</th>
                                <th>Escenario Crisis</th>
                                <th>Variación</th>
                            </tr>
                        </thead>
                        <tbody id="metricsTable">
                            <!-- Se llenará dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ACTIVIDAD 3 -->
        <div id="actividad3" class="tab-content">
            <div class="activity-section">
                <h2>📈 Actividad 3: Variables Aleatorias y Análisis de Resultados</h2>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Variable Aleatoria</th>
                                <th>Distribución</th>
                                <th>Parámetros</th>
                                <th>Aplicación</th>
                                <th>Validación</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Tiempos entre llegadas</strong></td>
                                <td>Exponencial</td>
                                <td>λ = 1/1.5 min</td>
                                <td>Simular llegada de clientes</td>
                                <td>KS Test p > 0.05</td>
                            </tr>
                            <tr>
                                <td><strong>Monto de retiros</strong></td>
                                <td>Uniforme</td>
                                <td>200-2000 Bs</td>
                                <td>Simular monto retirado</td>
                                <td>Chi-cuadrado p > 0.05</td>
                            </tr>
                            <tr>
                                <td><strong>Tipo transacción</strong></td>
                                <td>Discreta</td>
                                <td>50%R, 20%T, 30%D</td>
                                <td>Selección operación</td>
                                <td>Proporciones observadas</td>
                            </tr>
                            <tr>
                                <td><strong>Tiempo servicio</strong></td>
                                <td>Uniforme/Normal</td>
                                <td>1-2 min / μ=3, σ=0.2</td>
                                <td>Duración operaciones</td>
                                <td>KS Test p > 0.05</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-title">Mapa de Calor - Intensidad de Retiros</div>
                        <div class="chart-container">
                            <canvas id="heatMapChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">Distribución Regional - Cochabamba</div>
                        <div class="chart-container">
                            <canvas id="regionalChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Zona Cochabamba</th>
                                <th>Tipo</th>
                                <th>Población</th>
                                <th>Cajeros</th>
                                <th>Retiros Simulados</th>
                                <th>Intensidad</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody id="zonesTable">
                            <!-- Se llenará dinámicamente -->
                        </tbody>
                    </table>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Medida de Mitigación</th>
                                <th>Impacto Esperado</th>
                                <th>Costo</th>
                                <th>Tiempo Implementación</th>
                                <th>Efectividad</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Redistribución de efectivo</strong></td>
                                <td>Reducción 40% agotamientos</td>
                                <td>Media</td>
                                <td>24-48 horas</td>
                                <td class="normal">Alta</td>
                            </tr>
                            <tr>
                                <td><strong>Límites de retiro</strong></td>
                                <td>Reducción 60% monto total</td>
                                <td>Baja</td>
                                <td>Inmediato</td>
                                <td class="normal">Media-Alta</td>
                            </tr>
                            <tr>
                                <td><strong>Refuerzo logístico</strong></td>
                                <td>Incremento 50% capacidad</td>
                                <td>Alta</td>
                                <td>72 horas</td>
                                <td class="warning">Media</td>
                            </tr>
                            <tr>
                                <td><strong>Comunicación transparente</strong></td>
                                <td>Reducción 30% pánico</td>
                                <td>Baja</td>
                                <td>Inmediato</td>
                                <td class="normal">Alta</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <footer>
            <p>Simulación de Sistemas - Caso de Estudio 1 | Universidad Adventista de Bolivia</p>
            <p>Datos de referencia: Cochabamba - Total: 603 cajeros | Rural: 332 | Urbano: 271</p>
        </footer>
    </div>

    <script>
        // Datos de simulación
        const simulationData = {
            zonasCochabamba: [
                { zona: 'Centro', tipo: 'Urbano', poblacion: 150000, cajeros: 85, retiros: 0 },
                { zona: 'Zona Sur', tipo: 'Urbano', poblacion: 120000, cajeros: 72, retiros: 0 },
                { zona: 'Zona Norte', tipo: 'Urbano', poblacion: 90000, cajeros: 68, retiros: 0 },
                { zona: 'Quillacollo', tipo: 'Urbano', poblacion: 137000, cajeros: 45, retiros: 0 },
                { zona: 'Sacaba', tipo: 'Urbano', poblacion: 172000, cajeros: 52, retiros: 0 },
                { zona: 'Valles', tipo: 'Rural', poblacion: 80000, cajeros: 38, retiros: 0 },
                { zona: 'Trópico', tipo: 'Rural', poblacion: 70000, cajeros: 35, retiros: 0 },
                { zona: 'Cono Sur', tipo: 'Rural', poblacion: 50000, cajeros: 28, retiros: 0 }
            ],
            escenarios: {
                normal: { llegada: 1.5, retiros: 0.5, monto: 800 },
                rumor: { llegada: 0.8, retiros: 0.7, monto: 1200 },
                crisis: { llegada: 0.4, retiros: 0.9, monto: 1800 }
            }
        };

        // Funciones de navegación
        function openTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(button => button.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
            
            // Actualizar gráficos cuando se cambia de pestaña
            if (tabName === 'actividad1') initializeActivity1Charts();
            if (tabName === 'actividad2') initializeActivity2Charts();
            if (tabName === 'actividad3') initializeActivity3Charts();
        }

        // Inicializar gráficos de la Actividad 1
        function initializeActivity1Charts() {
            // Diagrama Causal
            new Chart(document.getElementById('causalChart'), {
                type: 'bar',
                data: {
                    labels: ['Anuncio', 'Percepción Riesgo', 'Demanda Efectivo', 'Colas', 'Agotamiento', 'Mayor Pánico'],
                    datasets: [{
                        label: 'Intensidad del Efecto',
                        data: [100, 85, 90, 75, 80, 95],
                        backgroundColor: '#e74c3c'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });

            // Distribución de Variables
            new Chart(document.getElementById('variablesChart'), {
                type: 'pie',
                data: {
                    labels: ['Variables de Entrada', 'Variables de Estado', 'Variables de Control', 'Variables de Salida'],
                    datasets: [{
                        data: [35, 25, 20, 20],
                        backgroundColor: ['#3498db', '#2ecc71', '#f39c12', '#e74c3c']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        // Inicializar gráficos de la Actividad 2
        function initializeActivity2Charts() {
            // Comparación de Escenarios
            new Chart(document.getElementById('scenarioComparisonChart'), {
                type: 'bar',
                data: {
                    labels: ['Tiempo Espera (min)', 'Retiros Rechazados (%)', 'Utilización (%)', 'Efectivo Restante (%)'],
                    datasets: [
                        {
                            label: 'Normal',
                            data: [1.2, 4, 65, 75],
                            backgroundColor: '#27ae60'
                        },
                        {
                            label: 'Rumor',
                            data: [2.8, 12, 82, 45],
                            backgroundColor: '#f39c12'
                        },
                        {
                            label: 'Crisis',
                            data: [5.4, 28, 94, 8],
                            backgroundColor: '#e74c3c'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            // Distribución de Transacciones
            new Chart(document.getElementById('transactionDistributionChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Retiros', 'Transferencias', 'Depósitos'],
                    datasets: [{
                        data: [50, 20, 30],
                        backgroundColor: ['#e74c3c', '#3498db', '#2ecc71']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        // Inicializar gráficos de la Actividad 3
        function initializeActivity3Charts() {
            // Mapa de Calor
            new Chart(document.getElementById('heatMapChart'), {
                type: 'bar',
                data: {
                    labels: simulationData.zonasCochabamba.map(z => z.zona),
                    datasets: [{
                        label: 'Intensidad de Retiros',
                        data: [85, 78, 72, 65, 70, 45, 40, 35],
                        backgroundColor: simulationData.zonasCochabamba.map(z => 
                            z.tipo === 'Urbano' ? '#e74c3c' : '#f39c12'
                        )
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true, max: 100 }
                    }
                }
            });

            // Distribución Regional
            new Chart(document.getElementById('regionalChart'), {
                type: 'polarArea',
                data: {
                    labels: simulationData.zonasCochabamba.map(z => z.zona),
                    datasets: [{
                        data: simulationData.zonasCochabamba.map(z => z.poblacion / 1000),
                        backgroundColor: [
                            '#e74c3c', '#3498db', '#2ecc71', '#f39c12',
                            '#9b59b6', '#1abc9c', '#34495e', '#95a5a6'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { position: 'right' }
                    }
                }
            });
        }

        // Ejecutar simulación
        function runSimulation() {
            const escenario = document.getElementById('scenario').value;
            const numClientes = parseInt(document.getElementById('clientes').value);
            const efectivoInicial = parseInt(document.getElementById('efectivo').value);

            // Simular datos
            const resultados = simularDatos(escenario, numClientes, efectivoInicial);
            
            // Actualizar tablas
            actualizarTablaMetricas(resultados);
            actualizarTablaZonas();
            
            alert(`Simulación completada para escenario ${escenario} con ${numClientes} clientes`);
        }

        function simularDatos(escenario, clientes, efectivo) {
            const config = simulationData.escenarios[escenario];
            
            // Simular métricas básicas
            return {
                tiempoEspera: (config.llegada * 0.8).toFixed(1),
                retirosRechazados: Math.round((1 - config.retiros) * 15),
                utilizacion: Math.round(config.retiros * 90),
                efectivoRestante: Math.round(efectivo * (1 - config.retiros * 0.8)),
                transaccionesExitosas: Math.round(clientes * 0.95)
            };
        }

        function actualizarTablaMetricas(resultados) {
            const tabla = document.getElementById('metricsTable');
            const escenario = document.getElementById('scenario').value;
            
            let html = '';
            const metricas = [
                { nombre: 'Tiempo Espera Promedio (min)', normal: '1.2', rumor: '2.8', crisis: '5.4' },
                { nombre: 'Retiros Rechazados (%)', normal: '4', rumor: '12', crisis: '28' },
                { nombre: 'Utilización Cajero (%)', normal: '65', rumor: '82', crisis: '94' },
                { nombre: 'Efectivo Restante (%)', normal: '75', rumor: '45', crisis: '8' },
                { nombre: 'Transacciones Exitosas (%)', normal: '96', rumor: '88', crisis: '72' }
            ];
            
            metricas.forEach(metrica => {
                const variacion = ((parseFloat(metrica[escenario]) - parseFloat(metrica.normal)) / parseFloat(metrica.normal) * 100).toFixed(0);
                const claseVariacion = variacion > 0 ? 'critical' : (variacion < 0 ? 'normal' : 'warning');
                
                html += `
                    <tr>
                        <td>${metrica.nombre}</td>
                        <td>${metrica.normal}</td>
                        <td>${metrica.rumor}</td>
                        <td>${metrica.crisis}</td>
                        <td class="${claseVariacion}">${variacion}%</td>
                    </tr>
                `;
            });
            
            tabla.innerHTML = html;
        }

        function actualizarTablaZonas() {
            const tabla = document.getElementById('zonesTable');
            let html = '';
            
            simulationData.zonasCochabamba.forEach(zona => {
                // Simular datos para esta zona
                const retiros = Math.round(zona.poblacion / 1000 * (10 + Math.random() * 20));
                const intensidad = Math.round((retiros / zona.cajeros) * 10);
                const estado = intensidad > 80 ? 'critical' : (intensidad > 60 ? 'warning' : 'normal');
                const textoEstado = intensidad > 80 ? 'Crítico' : (intensidad > 60 ? 'Alerta' : 'Estable');
                
                html += `
                    <tr>
                        <td><strong>${zona.zona}</strong></td>
                        <td>${zona.tipo}</td>
                        <td>${zona.poblacion.toLocaleString()}</td>
                        <td>${zona.cajeros}</td>
                        <td>${retiros}</td>
                        <td>${intensidad}%</td>
                        <td class="${estado}">${textoEstado}</td>
                    </tr>
                `;
            });
            
            tabla.innerHTML = html;
        }

        // Inicializar la página
        document.addEventListener('DOMContentLoaded', function() {
            initializeActivity1Charts();
            initializeActivity2Charts();
            initializeActivity3Charts();
            actualizarTablaZonas();
            
            // Ejecutar simulación inicial
            const resultadosIniciales = simularDatos('normal', 50, 50000);
            actualizarTablaMetricas(resultadosIniciales);
        });
    </script>
</body>
</html>